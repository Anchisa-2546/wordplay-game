import streamlit as st
import time
import random

# ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
word_categories = {
    "üåç ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®": {
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå": ["Thailand", "Japan", "France", "Brazil", "Germany", "Canada", "Australia", "China", "Italy", "India"],
        "‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ": [
            "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏ô‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÉ‡∏ï‡πâ", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏î‡∏±‡∏á", "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏´‡∏•‡∏ß‡∏á‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏≤‡∏£‡∏µ‡∏™", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏ô‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÉ‡∏ï‡πâ",
            "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏î‡∏±‡∏á", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡πÑ‡∏ô‡πÅ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≤", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏¥‡∏á‡πÇ‡∏à‡πâ", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î",
            "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤", "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏±‡∏ä‡∏°‡∏≤‡∏Æ‡∏≤‡∏•"
        ],
        "background": "https://example.com/world_background.jpg"
    },
    "üçé ‡∏ú‡∏•‡πÑ‡∏°‡πâ": {
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå": ["Apple", "Banana", "Mango", "Orange", "Durian", "Rambutan", "Longan", "Strawberry", "Pineapple", "Watermelon"],
        "‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ": [
            "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß-‡πÅ‡∏î‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏á‡∏≠‡πÑ‡∏î‡πâ", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏ô‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ",
            "‡∏£‡∏≤‡∏ä‡∏≤‡∏ú‡∏•‡πÑ‡∏°‡πâ ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÅ‡∏£‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏Ç‡∏ô ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏î‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πá‡∏Å ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏≤‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÅ‡∏î‡∏á ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°",
            "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏Ç‡πá‡∏á", "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß-‡πÅ‡∏î‡∏á ‡∏â‡πà‡∏≥‡∏ô‡πâ‡∏≥"
        ],
        "background": "https://example.com/fruit_background.jpg"
    },
    "üêÖ ‡∏™‡∏±‡∏ï‡∏ß‡πå": {
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå": ["Tiger", "Elephant", "Rabbit", "Penguin", "Sloth", "Capybara", "Kangaroo", "Hamster", "Giraffe", "Dolphin"],
        "‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ": [
            "‡πÄ‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏õ‡πà‡∏≤", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ö‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡πÑ‡∏î‡πâ", "‡∏ô‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡πà‡∏á",
            "‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ä‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ü‡∏±‡∏ô‡πÅ‡∏ó‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ô‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÉ‡∏ï‡πâ", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡πâ‡∏≠‡∏á",
            "‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Ñ‡∏≠‡∏¢‡∏≤‡∏ß‡∏Å‡∏¥‡∏ô‡πÉ‡∏ö‡πÑ‡∏°‡πâ", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏•‡∏π‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏°‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡πà‡∏á"
        ],
        "background": "https://example.com/animal_background.jpg"
    },
    "üë©‚Äçüî¨ ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û": {
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå": ["Doctor", "Engineer", "Teacher", "Artist", "Scientist", "Chef", "Musician", "Writer", "Nurse", "Actor"],
        "‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ": [
            "‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤", "‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°", "‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", "‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡∏∞",
            "‡∏ú‡∏π‡πâ‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£", "‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£", "‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏î‡∏ô‡∏ï‡∏£‡∏µ", "‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠", "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢",
            "‡∏ú‡∏π‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå"
        ],
        "background": "https://example.com/job_background.jpg"
    },
    "‚öΩ ‡∏Å‡∏µ‡∏¨‡∏≤": {
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå": ["Football", "Basketball", "Tennis", "Baseball", "Cricket", "Rugby", "Hockey", "Golf", "Volleyball", "Badminton"],
        "‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ": [
            "‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏Å‡∏•‡∏°", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡∏¢‡∏±‡∏î‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏°‡πâ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤",
            "‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πâ‡∏ï‡∏µ‡∏•‡∏π‡∏Å‡∏Å‡∏•‡∏°", "‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏¥‡∏°‡∏∞", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πâ‡πÑ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÅ‡∏•‡∏∞‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πá‡∏Å", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏ó‡∏£‡∏≤‡∏¢",
            "‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤", "‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏°‡πâ"
        ],
        "background": "https://example.com/sport_background.jpg"
    }
}

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô session_state
if "last_score" not in st.session_state:
    st.session_state.last_score = 0
if "last_time" not in st.session_state:
    st.session_state.last_time = 0
if "score" not in st.session_state:
    st.session_state.score = 0
if "total_time" not in st.session_state:
    st.session_state.total_time = 0
if "incorrect_attempts" not in st.session_state:
    st.session_state.incorrect_attempts = 0
if "game_running" not in st.session_state:
    st.session_state.game_running = False

# UI ‡πÄ‡∏Å‡∏°
st.title("üéÆ WordPlay: ‡∏ó‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå")
st.subheader(f"üìä ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {st.session_state.score} | ‚è≥ ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°: {st.session_state.total_time}s")
st.subheader(f"üí° ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {st.session_state.last_score} | ‡πÄ‡∏ß‡∏•‡∏≤: {st.session_state.last_time}s")

# ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
category = st.selectbox("\U0001f4c2 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà", list(word_categories.keys()))
st.markdown(f"""
    <style>
        body {{
            background-image: url('{word_categories[category]["background"]}');
            background-size: cover;
        }}
    </style>
    """, unsafe_allow_html=True)

# ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
if st.button("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°"):
    st.session_state.game_running = True
    st.session_state.score = 0
    st.session_state.total_time = 0
    st.session_state.incorrect_attempts = 0

if st.session_state.game_running:
    # ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ
    word_index = random.randint(0, len(word_categories[category]["‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå"]) - 1)
    correct_word = word_categories[category]["‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå"][word_index]
    hint = word_categories[category]["‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ"][word_index]
    st.write(f"üí° ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: {hint}")
    
    # ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î
    st.write(f"‚ùå ‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: {st.session_state.incorrect_attempts}/3")
    
    user_answer = st.text_input("üìù ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà")
    if user_answer and user_answer.lower().strip() == correct_word.lower():
        st.success("‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!")
        st.session_state.score += 10
    else:
        st.session_state.incorrect_attempts += 1
        if st.session_state.incorrect_attempts >= 3:
            st.session_state.game_running = False
            st.session_state.last_score = st.session_state.score
            st.session_state.last_time = st.session_state.total_time